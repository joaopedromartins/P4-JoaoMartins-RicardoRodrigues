<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<h:outputStylesheet library="css" name="app.css" />
</h:head>


<h:body>
	<ui:composition>
		<div id="accountScreen" class="playlistScreen">
			
			<h2 id="accountTitle">#{userSession.username}</h2>
			<div id="accountDetails">
				<div>
					<div class="accountDetailsMain">
					<span class="accountLabel">Username: </span>
					<span class="accountValue">#{userSession.username}</span>
					<span class="accountEdit"><a href="" id="usernameEditor">edit</a></span>
					</div>
					<div class="accountDetailsForm" id="usernameDetailsForm">
						<h:form>
							<span class="accountUpdateFields">
							<p:inputText value="#{usersinterface.username}" placeholder="username" 
							validator="usernameValidator" styleClass="accountUpdateFields"/>
							</span>
							<span class="accountUpdateFields">
							<p:password value="#{usersinterface.password}" placeholder="password" styleClass="accountUpdateFields" />
							</span>
							<span class="accountUpdateFields">
							<h:commandButton action="#{usersinterface.updateUsername()}" styleClass="accountUpdateFields" value="submit" update="growl" />					
							</span>
						</h:form>
					</div>
				</div>
				
				<div>
					<div class="accountDetailsMain">
					<span class="accountLabel">Email: </span>
					<span class="accountValue">#{userSession.email}</span>
					<span class="accountEdit"><a href="" id="emailEditor">edit</a></span>
					</div>
					<div class="accountDetailsForm" id="emailDetailsForm">
						<h:form>
							<span class="accountUpdateFields">
								<p:inputText value="#{usersinterface.email}" placeholder="email" styleClass="accountUpdateFields" validator="emailValidator" />
							</span>
							<span class="accountUpdateFields">
								<p:password value="#{usersinterface.password}" placeholder="password" styleClass="accountUpdateFields" />
							</span>
							<span class="accountUpdateFields">
								<h:commandButton action="#{usersinterface.updateEmail()}" styleClass="accountUpdateFields" value="submit" update="growl" />
							</span>
						</h:form>
					</div>
				</div>
				
				<div>
					<div class="accountDetailsMain">
					<span class="accountLabel">Password: </span>
					<span class="accountValue">****</span>
					<span class="accountEdit"><a href="" id="passwordEditor">edit</a></span>
					</div>
					<div class="accountDetailsForm" id="passwordDetailsForm">
						<h:form>
							<span class="accountUpdateFields">
							<p:password value="#{usersinterface.password}" placeholder="new password" />
							</span>
							<span class="accountUpdateFields">
							<p:password value="#{usersinterface.cpassword}" styleClass="accountUpdateFields" placeholder="confirm password" />
							</span>
							<span class="accountUpdateFields">
							<p:password value="#{usersinterface.oldPassword}" styleClass="accountUpdateFields" placeholder="old password" />
							</span>
							<span class="accountUpdateFields">
							<h:commandButton action="#{usersinterface.updatePassword()}" styleClass="accountUpdateFields" value="submit" update="growl" />
							</span>
						</h:form>
					</div>
				</div>
			</div>
			
			<h:form id="form" enctype="multipart/form-data">
				<h:outputLabel value="title" />
				<h:inputText value="#{uploader.title}" />
				<h:outputLabel value="Author" />
				<h:inputText value="#{uploader.author}" />
				<h:outputLabel value="Album" />
				<h:inputText value="#{uploader.album}" />
				<h:outputLabel value="Genre" />
				<h:inputText value="#{uploader.genre}" />
				<h:outputLabel value="Year" />
				<h:inputText value="#{uploader.year}" />

				<h:inputFile id="file" value="#{uploader.file}" />
				<h:commandButton value="Upload" action="#{uploader.upload}" />
			</h:form>


			<ui:repeat value="#{musicList.musics}" var="item" varStatus="status">
			<div class="musicRow" id="musicRow#{status.index}">
				<span>#{item}</span>
				<h:link value="play" class="playBtn" id="btn#{status.index}" />
				<h:inputHidden id="hidden#{status.index}" value="#{musicList.path}#{item.filename}" />
			</div>

			<h:panelGroup class="musicEditRow editmusicRow#{status.index}" rendered="#{uploader.isEditable(item.id)}">
				<h:form id="form">
					<h:outputLabel value="title" />
					<h:inputText value="#{uploader.title}" />
					<h:outputLabel value="Author" />
					<h:inputText value="#{uploader.author}" />
					<h:outputLabel value="Album" />
					<h:inputText value="#{uploader.album}" />
					<h:outputLabel value="Genre" />
					<h:inputText value="#{uploader.genre}" />
					<h:outputLabel value="Year" />
					<h:inputText value="#{uploader.year}" />


					<h:commandButton value="Edit" action="#{uploader.edit(item.id)}" />
					<h:commandButton value="Remove"
						action="#{uploader.remove(item.id)}" />
				</h:form>
			</h:panelGroup>
		</ui:repeat>
		
		<ui:include src="/resources/templates/musicFilter.xhtml" />
		</div>
	</ui:composition>
</h:body>

</html>